<?xml version="1.0" encoding="utf-8" ?>
<Defs>

  <ThingDef ParentName="MakeableDrugBase">
    <defName>MSSMeme_WarcasketYayo</defName>
    <label>warcasket compatible yayo</label>
    <description>An ultra fine and ultra pure compound of yayo specially crafted to induce an even greater high than normal yayo for a long period of time. However, due to an oddity with armor calculati- I mean the molecular structure of pure yayo, it can only be properly consumed by warcaskets. Any pawn that is not a warcasket will bemoan how they are "not compatible" with this yayo, attaining mental anguish comparable to the amount a certain polar bear got from people telling him warcaskets were not working with Yayo's combat (seriously, if you would like your pawns actually functioning for the next in-game week, don't make them take this). Warcaskets will get a rather pleasant buzz instead, as well as a strong burst of vigor.</description>
    <descriptionHyperlinks>
      <HediffDef>PsychiteTolerance</HediffDef>
      <HediffDef>PsychiteAddiction</HediffDef>
      <HediffDef>ChemicalDamageSevere</HediffDef>
    </descriptionHyperlinks>
    <graphicData>
      <texPath>Things/Item/Drug/Yayo</texPath>
      <graphicClass>Graphic_StackCount</graphicClass>
      <drawSize>0.75</drawSize>
    </graphicData>
    <rotatable>false</rotatable>
    <statBases>
      <WorkToMake>750</WorkToMake>
      <MarketValue>85</MarketValue>
      <Mass>0.05</Mass>
    </statBases>
    <techLevel>Industrial</techLevel>
    <minRewardCount>10</minRewardCount>
    <ingestible>
      <foodType>Processed</foodType>
      <joyKind>Chemical</joyKind>
      <joy>0.80</joy>
      <drugCategory>Hard</drugCategory>
      <baseIngestTicks>150</baseIngestTicks>
      <ingestSound>Ingest_Snort</ingestSound>
      <ingestHoldOffsetStanding>
        <northDefault>
          <offset>(0.21,0,0.05)</offset>
        </northDefault>
      </ingestHoldOffsetStanding>
      <ingestHoldUsesTable>false</ingestHoldUsesTable>
      <ingestCommandString>Snort {0}</ingestCommandString>
      <ingestReportString>Snorting {0}.</ingestReportString>
      <useEatingSpeedStat>false</useEatingSpeedStat>
      <outcomeDoers>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>MSSMeme_WarcasketYayoHigh</hediffDef>
          <severity>0.75</severity>
          <toleranceChemical>Psychite</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_OffsetNeed">
          <need>Rest</need>
          <offset>0.4</offset>
          <toleranceChemical>Psychite</toleranceChemical>
        </li>
        <li Class="IngestionOutcomeDoer_GiveHediff">
          <hediffDef>PsychiteTolerance</hediffDef>
          <severity>0.040</severity>
          <divideByBodySize>true</divideByBodySize>
          <multiplyByGeneToleranceFactors>true</multiplyByGeneToleranceFactors>
        </li>
      </outcomeDoers>
    </ingestible>
    <recipeMaker>
      <researchPrerequisite>PsychiteRefining</researchPrerequisite>
      <recipeUsers>
        <li>DrugLab</li>
      </recipeUsers>
      <soundWorking>Recipe_Drug</soundWorking>
    </recipeMaker>
    <costList>
      <PsychoidLeaves>32</PsychoidLeaves>
    </costList>
    <comps>
      <li Class="CompProperties_Drug">
        <chemical>Psychite</chemical>
        <addictiveness>0.01</addictiveness>
        <existingAddictionSeverityOffset>0.20</existingAddictionSeverityOffset>
        <needLevelOffset>0.9</needLevelOffset>
        <isCombatEnhancingDrug>false</isCombatEnhancingDrug>
        <listOrder>100</listOrder>
        <overdoseSeverityOffset>0.18~0.35</overdoseSeverityOffset>
        <largeOverdoseChance>0.01</largeOverdoseChance>
      </li>
    </comps>
    <allowedArchonexusCount>200</allowedArchonexusCount>
  </ThingDef>

  <HediffDef>
    <defName>MSSMeme_WarcasketYayoHigh</defName>
    <label>high on warcasket yayo</label>
    <labelNoun>a warcasket yayo high</labelNoun>
    <description>Active warcasket yayo in the bloodstream. Generates an intense euphoric high for warcaskets while inflicting intense anguish on normal pawns.</description>
    <hediffClass>Hediff_High</hediffClass>
    <defaultLabelColor>(1,0,0.5)</defaultLabelColor>
    <scenarioCanAdd>true</scenarioCanAdd>
    <maxSeverity>1.0</maxSeverity>
    <isBad>false</isBad>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.1425</severityPerDay>
        <showHoursToRecover>true</showHoursToRecover>
      </li>
    </comps>
      <stages>
        <li>
          <painFactor>0.5</painFactor>
          <statFactors>
            <RestFallRateFactor>0.2</RestFallRateFactor>
          </statFactors>
          <capMods>
            <li>
              <capacity>Moving</capacity>
              <offset>0.25</offset>
            </li>
          </capMods>
        </li>
      </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>MSSMeme_WarcasketYayoHigh</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>MSSMeme_WarcasketYayoHigh</hediff>
    <nullifyingTraits>
      <li>VFEP_WarcasketTrait</li>
    </nullifyingTraits>
    <validWhileDespawned>true</validWhileDespawned>
    <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
    <stages>
      <li>
        <label>incompatible with yayo</label>
        <description>Alas, I am incompatible with this yayo!</description>
        <baseMoodEffect>-999</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  <ThoughtDef>
    <defName>MSSMeme_WarcasketWarcasketYayoHigh</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>MSSMeme_WarcasketYayoHigh</hediff>
    <requiredTraits>
      <li>VFEP_WarcasketTrait</li>
    </requiredTraits>
    <validWhileDespawned>true</validWhileDespawned>
    <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
    <stages>
      <li>
        <label>compatible with yayo</label>
        <description>Wow, this is some good yayo. I feel stronger than I ever was before!</description>
        <baseMoodEffect>15</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>

  
  <!-- Psychite addiction -->
  
  <ChemicalDef>
    <defName>Psychite</defName>
    <label>psychite</label>
    <addictionHediff>PsychiteAddiction</addictionHediff>
    <toleranceHediff>PsychiteTolerance</toleranceHediff>
    <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
    <onGeneratedAddictedEvents>
      <li>
        <hediff>ChemicalDamageSevere</hediff>
        <chance>0.15</chance>
        <partsToAffect>
          <li>Kidney</li>
        </partsToAffect>
      </li>
    </onGeneratedAddictedEvents>
    <geneToleranceBuildupFactorResist>0.5</geneToleranceBuildupFactorResist>
    <geneToleranceBuildupFactorImmune>0</geneToleranceBuildupFactorImmune>
    <geneOverdoseChanceFactorResist>0.5</geneOverdoseChanceFactorResist>
    <geneOverdoseChanceFactorImmune>0</geneOverdoseChanceFactorImmune>
  </ChemicalDef>
  
  <NeedDef ParentName="DrugAddictionNeedBase">
    <defName>Chemical_Psychite</defName>
    <needClass>Need_Chemical</needClass>
    <label>psychite</label>
    <description>Because of a psychite addiction, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
    <listPriority>50</listPriority>
  </NeedDef>

  <HediffDef ParentName="DrugToleranceBase">
    <defName>PsychiteTolerance</defName>
    <label>psychite tolerance</label>
    <description>A built-up tolerance to psychite. The more severe this tolerance is, the more psychite-based drugs like yayo or flake it takes to get the same effect.</description>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.015</severityPerDay>
      </li>
      <li Class="HediffCompProperties_DrugEffectFactor">
        <chemical>Psychite</chemical>
      </li>
    </comps>
    <hediffGivers>
      <li Class="HediffGiver_RandomDrugEffect">
        <hediff>ChemicalDamageSevere</hediff>
        <severityToMtbDaysCurve>
          <points>
            <li>(0.45, 99999)</li>
            <li>(0.5, 180)</li>
            <li>(1, 135)</li>
          </points>
        </severityToMtbDaysCurve>
        <partsToAffect>
          <li>Kidney</li>
        </partsToAffect>
      </li>
    </hediffGivers>
  </HediffDef>
  
  <HediffDef ParentName="AddictionBase">
    <defName>PsychiteAddiction</defName>
    <label>psychite addiction</label>
    <description>A chemical addiction to psychite. Long-term presence of psychite has caused neurological adaptations at the cellular level, so the brain can no longer function properly without the drug.
\nWithout regular doses of psychite from drugs like flake or yayo, withdrawal symptoms will begin. However, extended abstinence will force the brain to adapt back to its normal state, resolving the addiction.</description>
    <hediffClass>Hediff_Addiction</hediffClass>
    <causesNeed>Chemical_Psychite</causesNeed>
    <comps>
      <li Class="HediffCompProperties_SeverityPerDay">
        <severityPerDay>-0.0333</severityPerDay>
        <showDaysToRecover>true</showDaysToRecover>
      </li>
    </comps>
    <stages>
      <li>
      </li>
      <li>
        <label>withdrawal</label>
        <socialFightChanceFactor>3.0</socialFightChanceFactor>
        <statOffsets>
          <RestFallRateFactor>0.3</RestFallRateFactor>
        </statOffsets>
        <capMods>
          <li>
            <capacity>Consciousness</capacity>
            <offset>-0.20</offset>
          </li>
          <li>
            <capacity>Moving</capacity>
            <offset>-0.20</offset>
          </li>
          <li>
            <capacity>Manipulation</capacity>
            <offset>-0.20</offset>
          </li>
        </capMods>
        <mentalStateGivers>
          <li>
            <mentalState>Binging_DrugExtreme</mentalState>
            <mtbDays>40</mtbDays>
          </li>
          <li>
            <mentalState>Wander_Psychotic</mentalState>
            <mtbDays>10</mtbDays>
          </li>
        </mentalStateGivers>
      </li>
    </stages>
  </HediffDef>

  <ThoughtDef>
    <defName>PsychiteWithdrawal</defName>
    <workerClass>ThoughtWorker_Hediff</workerClass>
    <hediff>PsychiteAddiction</hediff>
    <validWhileDespawned>true</validWhileDespawned>
    <developmentalStageFilter>Baby, Child, Adult</developmentalStageFilter>
    <stages>
      <li>
        <visible>false</visible>
      </li>
      <li>
        <label>psychite withdrawal</label>
        <description>God I'm tired. Everything's so slow and boring. Especially me.</description>
        <baseMoodEffect>-35</baseMoodEffect>
      </li>
    </stages>
  </ThoughtDef>
  
</Defs>
